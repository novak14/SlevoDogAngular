<h2>Komentáře</h2>
<div class="row" *ngFor="let comm of comments">
  <ng-template [ngIf]="comm.fkParrentComment === null">
  <div class="col-xs-12 comment">

    <div class="imageWithName">
        <img class="adjustImage" src="../../../../assets/images/dog(1).svg" alt="user profile"/>
        <span class="adjustName">{{ comm.name }}</span>
    </div>

      <div class="commentText">
        <p>{{ comm.text }}</p>
      </div>

      <div class="commentDate">
        {{ comm.dateInsert }}
      </div>

      <a (click)="fillAnswer(comm)">Odpovědět</a>
  </div>

  </ng-template>
  <div *ngFor="let parrComm of comments">
    <ng-template [ngIf]="comm.id === parrComm.fkParrentComment">
      <div class="col-xs-12 answer">

        <div class="imageWithName">
          <img class="adjustImage" src="../../../../assets/images/dog(3).svg" alt="user profile"/>
          <span class="adjustName">{{ parrComm.name }}</span>
        </div>

        <div class="commentText">
          <p>{{ parrComm.text }}</p>
        </div>

        <div class="commentDate">
          {{ parrComm.dateInsert }}
        </div>

      </div>
    </ng-template>
  </div>

    <div *ngIf="comm.check && showFormAnswer">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <form [formGroup]="answerCommentForm" (ngSubmit)="onSubmitAnswer(comm.id)">
              <div class="form-group">
                <label for="responseUsername">Jméno</label>
                <input class="form-control" type="text" id="responseUsername"
                       formControlName="responseUsername"
                       />
              </div>
              <div class="form-group">
                 <textarea formControlName="commentText"
                    rows="3"
                    class="form-control"></textarea>
              </div>
              <button *ngIf="answerCommentForm.valid" class="btn btn-primary" type="submit">Odeslat</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

<div class="container" *ngIf="!showFormAnswer; else addNormalComment">
  <div class="row">
    <div class="col-xs-12">
      <form (ngSubmit)="onSubmit()" #f="ngForm">
        <div class="form-group">
          <label for="username">Název</label>
          <input class="form-control" type="text" id="username"
                 ngModel
                 name="username"
                 required />
        </div>
        <div class="form-group">
          <textarea name="commentText"
                    rows="3"
                    class="form-control"
                    ngModel
                    required></textarea>
        </div>
        <button class="btn btn-primary" type="submit" [disabled]="!f.valid">Odeslat</button>
      </form>
    </div>
  </div>
</div>
<div>
  <ng-template #addNormalComment>
    <a class="btn btn-primary" (click)="showFormAnswer = false">Přidat komentář</a>
  </ng-template>
</div>

